language: node_js
addons:
  apt:
    packages:
    - xvfb
    - gnome-keyring
    - libsecret-1-dev
    - xorg
    - dbus
    - dbus-x11
env:
  matrix:
  - CC=clang CXX=clang++ npm_config_clang=1
  global:
  - secure: iS614rLDwYUHU/Bps938zwnyWGigZ8YD/fYe9GBh8YxcMG+SUQCMsXblSEKEgWTv0H5KVyCGg1DdU3J4uBTFf7o0C4XSjnGoVonjk6hpdWWrNMlPeUNm9ejYEDmxN1hLzuR3q9poN3Bz4oU0pxr9YizbkqawPWJGa2zqen3+0CtbkI3ec/SKNS+0j/0pZ4mTGdZtTd3KJVa5nRboVA556m6vWe2iBgRrPwOTtnsgc7qOEDnecsvj6qfqy6NP82ANvcv/dVOV+HB1+A04pKkQk74FRVZA90zee1gaeq6OFvI7GcqIPNhyv3dljAAn1wMd3U1LL8B4yjE4opxwPda8l/HoR7YVqXdWo666ss3WHDSo/vL5ZWeY6ozLynIbShVZI4t+BjHFycPzJ157EUNrj48ReP+RNrhpmpD4pkHm6dZzZbyy+Wzoiwz93xATR8H5zq5OEXaHhMFUGu+qGQADstyUT0vdvxIfbwbeB83QfsC2vC6FAsw0hMUhG4lkXNMi7kYfyY/WagQpxd7YKIpT5AD5KIBuIL8zPpEqNi+JsdK9HrmuIaqFmwHTfAEtMUU7rkRhAaEhSIP/8c4eUVXCaXnYuFqBy5e1XoquY7XBqAaVSBcGO66Nh76H5SqgioyQw0qrtMLhtVv+2hKvQow11hcHdPopHec29TzYJqUM5Ss=
  - secure: JV9cW5cZeK9tadMDA8dvCGjDroWrYJYVY8ETGfRh/tQYZfeEJh3WD5pQa4WhcGMSsW+nZogjDc5rGkrruhjvVsnnii15PQ2ipcalZLesctSQhsS8oo84vkgs6fd4L4TwNZcdUpU1FHpKs8R/cwKyXltXMQ2q/Z8mpGyr3wUhqbanKEs4R/BOP4V85zNZtjGXTcUoTVFspkx7FgT+kUi4J+CF+G7OyndcOgivz+DkPILN9bEqyiU1vk9iCIIY/y1LlD7MbLz3P3syl77E61lddsXzO5ZZD6Uu/eqvyhEL0qHf2HvO2ZGNV1omAa82tUF4G6uX+KpCFlRYF4sZV4mh9yVQtpPVnE7twqG1JJDuDt8D0iSGy3f/ORjlUNBvo1QxJ0LICqnizPRkbh/ADztG2Vpd/ow9t1x3ihqYEzk7PY65BQXiPuelhCrNSVAiSqXPrH+E2jmFozgmtXPG62HqvcbvSWF3FayUh8Zf1vc07YPFILZZ5u60MQRUyeajpoDbzXW71lMMbkUSdPDmnlqzrDcqmNtoH2oKoRv1ZmWhhFiakcGsJWsxTV1upGihbEJt6Xnq52r8NPGp3Tm4t9xox+RqK/XLDe14A8BQLZ+2XnVaJhGz4OfpsbhWEO8aY1nPcO0+Kw56Afjpa93nLcT39IE59UyAhVHwnGvm+vr4YNM=
  - secure: YZRuJaXbqaQNjkp/IFnHGEyf2PeH4F7N8/NMp48eBFVxnN/bJ74Al3TmkeP8c9v7sRMlsUt41NX6xDXE8eloMvtgv+ffn4p1es1Jv6J/ZhCom1y/FJ/Oyr08qmyiRXKAgN0uf38373K9e0AXstIklf7t+PzdNbpX2UnN5+znA/r2nU1KLqS2yw9DFHJuJXyFby8QQirxR3XWyGh5xVroIDkvllf84yeU7mGY7aoDDmoDwBimXTJP2Fv/YdFrCvuyaIEkgaWGD1PU0kwdWbJ/tx6x29AEmXzfQYbLe8oG0Yey7LfFzXWGykqJkVrdpceHQh92SvbbV12C5N2xXZSz0Tc57Bc/wQqKlDEn9BBmOyAs3boJX93Loo+S70rJkB0aYuwIAqEwqP0DG554E40MDY3zATHiSm+Lkpl8xvguXgn0We193cDyjzw34zqvCX5YE66SKfx7sTrWyi3bHh2vWGZB49ODs45rH5HzILSNTfeLuRlX5fWXCBt1CBdA6UcSFdKgL2UZg4UkGpYo58U9IG7Z2TZ2dWlvg2V7pETLaANgNNbLTskbGngHN6NGwlqv8aVVArJL4vWAJIJFiTudVlcG6xnnKgqqp1UXhtypXEJ3jn5A2VR1BAI04YG7gO47EX4nL0XFHN/+YbWqwfLLCzXEudQHse9hReY83sbFStg=
  - secure: c932ERsEClZS5phhtR6WtNr66NWqAyaVXMPvwClq66RvMAh5VHAYOLHTd/yAu1iQIJETwBwJyjXXIZ2X3c/b71uqEQM0iW2QoXlx7SzxUOcWCFG6Z/f0mjCG/AqifMpQUICzAMkpTGFdG47/DpodymnK6QpLbLhv5yHocswvLA6WVLP5w8kFRMzd5o5CdK+/NRPGAaJI7K0mvF/35TAtfvV3Wl2v9+29l6zaNMgu0OaskkogGbPi1Wy62fjbNzFlLircqtKaAG4FEjCsZhCjm0axEgdouv4gFJwdtg7amuBBmcUTM77dREOKT6gHq0DNgHvKJ2U4TpT8Unn6HVzgAhUeYse2YzpJS7c88akUS29S4/EN4uShqug7ZkCyKikY2TnQSArucsp7bWk2pNQ8DfKaqo7zk1rvzm6+BGwI5Zj4ZRDfSIeLfCjT0p2SBFVgOF2yz+4licyCpwGzGYjy0pN4uTVQt01sIzT6DzD0+iJ9dmIBdJovxrBWtyEncHzaSV6bQP2xT6RQoQ0OSFmJvIH9WBv//RgWF3XQc5QpgjPQnemaRGOGWe77t/46VQ/w8BEbI96AtqCJkuOVkbGiOtklYRC56ELChZ8K7wyF0eghaLxBKz8eASISjjeIGKrr2HqYPOfxskrBRzr6cOKYaR2BmLveRMmp2pwCVTS5l6c=
  - UPDATE_TYPE: patch
os:
- osx
- linux
node_js:
- 12
- 14
- node
branches:
  only:
  - main
before_install:
- if [ "$TRAVIS_OS_NAME" = "linux" ]; then mkdir -p ~/.local/share/keyrings; export
  $(dbus-launch); echo "" | gnome-keyring-daemon --unlock; /usr/bin/gnome-keyring-daemon
  --components=secrets,pkcs11,ssh --start --daemonize; export $(echo "" | /usr/bin/gnome-keyring-daemon
  -r -d --unlock); fi
jobs:
  exclude:
  - if: type = pull_request
    os: osx
  - if: type = pull_request
    node_js: node
  - if: type = pull_request
    node_js: 14
deploy:
  provider: script
  script: bash deploy.sh
  on:
    branch: main